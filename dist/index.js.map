{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/index.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","KMRouter","container","routes","_this","this","_classCallCheck","_checkContainerType","_checkRoutesType","params","_checkPathExist","forEach","route","path","_formatPath","_initEvent","_this2","addEventListener","_dispatch","location","pathname","e","_triggerRouterLink","match","concat","document","querySelector","Node","Array","isArray","every","_typeof","url","_this3","isPushState","arguments","length","undefined","redirect","trim","replace","_match","history","pushState","replaceState","template","controller","uri","innerHTML","_this4","find","_ref","generatedURLRegExp","_generateURLRegExp","matches","test","includes","groups","RegExp","target","getAttribute","preventDefault"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class KMRouter {\n  /**\n   * @description Creates an instance of Router.\n   * @param {string|Node} container\n   * @param {Object[]} routes\n   * @memberof Router\n   */\n  constructor(container, routes) {\n    this.container = this._checkContainerType(container);\n    this.routes = this._checkRoutesType(routes);\n    this.params = {};\n    this._checkPathExist();\n    this.routes.forEach((route) => {\n      route.path = this._formatPath(route.path);\n    });\n    this._initEvent();\n  }\n\n  /**\n   * @description Initialise les écouteurs d'evenement\n   * @memberof Router\n   */\n  _initEvent() {\n    window.addEventListener('load', () =>\n      this._dispatch(window.location.pathname)\n    );\n    window.addEventListener('popstate', () =>\n      this._dispatch(window.location.pathname)\n    );\n    this.container.addEventListener('click', (e) => this._triggerRouterLink(e));\n  }\n\n  /**\n   * @description Vérifie si la route est bien formatée\n   * @param {String} path\n   * @returns {String}\n   * @memberof Router\n   */\n  _formatPath(path) {\n    if (path.match(/^(\\/\\#|\\#\\/)/)) {\n      throw `bad url \\`${path}\\``;\n    }\n    if (path === '') {\n      return '/';\n    }\n    if (path.match(/^\\//) === null && path.match(/^\\*$/) === null) {\n      return `/${path}`;\n    }\n    if (path.match(/^\\*$/)) {\n      return `\\\\*`;\n    }\n    return path;\n  }\n\n  /**\n   * @description Vérifie si le paramètre container est une string ou un object\n   * @param {String|Node} container\n   * @returns {Node}\n   * @memberof Router\n   */\n  _checkContainerType(container) {\n    if (typeof container === 'string') {\n      return document.querySelector(container);\n    } else if (container instanceof Node) {\n      return container;\n    } else {\n      throw 'The first argument must be an element or a string selector';\n    }\n  }\n\n  /**\n   * @description Vérifie si le paramètre routes est un tableau d'objets\n   * @param {Array} routes\n   * @returns {Array}\n   * @throws The second argument must be an array of object\n   * @memberof Router\n   */\n  _checkRoutesType(routes) {\n    if (Array.isArray(routes)) {\n      let isObjectArray = routes.every(\n        (route) => typeof route === 'object' && !Array.isArray(route)\n      );\n      if (!isObjectArray) {\n        throw 'The second argument must be an array of object';\n      }\n      return routes;\n    }\n    throw 'The second argument must be an array of object';\n  }\n\n  /**\n   * @description Vérifie si chaque route a une clé \"path\"\n   * @param {String} path\n   * @throws path is missing on route number {i}\n   * @memberof Router\n   */\n  _checkPathExist() {\n    this.routes.forEach((route, i) => {\n      if (!route.hasOwnProperty('path')) {\n        throw `path is missing on route number \\`${i}\\``;\n      }\n    });\n  }\n\n  /**\n   * @description Récupère l'objet de la route courante puis rend la page courante. Permet également la redirection.\n   * @memberof Router\n   */\n  _dispatch(url, isPushState = true, redirect = false) {\n    if (!url || (typeof url !== 'string' || url.trim() === '')) {\n      throw 'No url renseigned';\n    }\n\n    if (redirect && url.match(/^(http:\\/\\/|https:\\/\\/)/)) {\n      window.location.replace(url);\n      return;\n    }\n\n    const match = this._match(url);\n\n    if (match && match.hasOwnProperty('redirect')) {\n      this._dispatch(match.redirect, false, true);\n    } else if (match) {\n      if (isPushState) {\n        history.pushState({ key: url }, '', url);\n      } else if (!isPushState && url.match(/^\\*$/) === null) {\n        history.replaceState({ key: url }, '', url);\n      }\n\n      let template = '';\n      template =\n        match.controller({\n          redirect: (uri) => this._dispatch.call(this, uri, false, true),\n          params: this.params,\n          path: window.location.pathname\n        }) || '';\n\n      if (template.trim() !== '') {\n        this.container.innerHTML = template;\n        if (redirect) return template;\n      }\n    } else {\n      this._dispatch('*', false);\n    }\n  }\n\n  /**\n   * @description Vérifie si l'url existe parmi les routes\n   * @param {String} url\n   * @param {Object[]} routes\n   * @returns {Object} Retourne l'objet de la route correspondante\n   * @memberof Router\n   */\n  _match(url) {\n    return this.routes.find(({ path }) => {\n      const generatedURLRegExp = this._generateURLRegExp(path);\n      const matches = url.match(generatedURLRegExp);\n\n      if (url !== '/' && generatedURLRegExp.test('/')) {\n        return false;\n      }\n\n      if (generatedURLRegExp.test(url) && matches[0].includes(url)) {\n        this.params = matches.groups;\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  /**\n   * @description Génère la regexp de l'url\n   * @param {String} path\n   * @returns {RegExp}\n   * @memberof Router\n   */\n  _generateURLRegExp(path) {\n    const reg = /\\{([^\\s\\/\\:]+)\\:?(?:\\((.*?)\\))?\\}/g;\n    return new RegExp(\n      `${path.replace(reg, (...args) =>\n        args[2] ? `(?<${args[1]}>${args[2]})` : `(?<${args[1]}>\\\\w+)`\n      )}/?`\n    );\n  }\n\n  /**\n   * @description Action au clique sur un lien ayant l'attribut 'data-router-link'\n   * @param {Event} e\n   * @memberof Router\n   */\n  _triggerRouterLink(e) {\n    if (e.target.getAttribute('data-router-link') !== null) {\n      e.preventDefault();\n      const url = e.target.getAttribute('href');\n      this._dispatch(url);\n    }\n  }\n}\n"],"sourceRoot":""}